import{_ as S}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-BU16DZwG.js";import{d as N,i,R as v,$ as R,r as s,o as B,c as L,a as Y,b as t,w as o,e as u,u as b,z as E,W as H,T as U,aK as h,P as F,a0 as y}from"./index-MVVa4Kd4.js";import{_ as j,l as P,d as K}from"./EditLog.vue_vue_type_script_setup_true_lang-Brgl10GP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sortable.esm-C0-Qcoum.js";import"./index-Dv1ntQwP.js";import"./upload-ex8U0d6F.js";const W={class:"h-full"},q={class:"card !pb-0 mb-2 flex"},G={class:"flex ml-4"},I={class:"h-[calc(100%-72px)]"},oe=N({__name:"index",setup(J){const A=i(),k=i(),c=i(),D=i(0),M=i([]),d=v({pageSize:25,pageNum:1}),n=v({time:["",""],createdAt:["",""],updatedAt:["",""]}),C=v([{prop:"time",label:"日志时间",sortable:!0,render:({row:l})=>y(l.time).format("YYYY-MM-DD")},{prop:"createdAt",label:"创建时间",width:180,sortable:!0,render:({row:l})=>y(l.createdAt).format("YYYY-MM-DD HH:mm:ss")},{prop:"updatedAt",label:"更新时间",width:180,sortable:!0,render:({row:l})=>l.updatedAt?y(l.updatedAt).format("YYYY-MM-DD HH:mm:ss"):""},{prop:"operation",label:"操作",fixed:"right",width:120}]),r=async(l=!1)=>{l&&(d.pageNum=1);const{data:e}=await P({...n,...d});M.value=e.logs,D.value=e.total},V=l=>{l&&(l.resetFields(),r(!0))},$=l=>{h.confirm("此操作将永久删除该日志, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await K(l),F.success("删除成功"),r()})};return R(()=>{r()}),(l,e)=>{const f=s("el-date-picker"),_=s("el-form-item"),g=s("el-col"),z=s("el-row"),w=s("el-form"),p=s("el-button"),T=s("el-pagination");return B(),L("div",W,[Y("div",q,[t(w,{inline:!0,model:n,"label-width":"auto",ref_key:"searchFormRef",ref:k,class:"flex-1"},{default:o(()=>[t(z,{gutter:20},{default:o(()=>[t(g,{span:8},{default:o(()=>[t(_,{label:"日志时间",prop:"time"},{default:o(()=>[t(f,{modelValue:n.time,"onUpdate:modelValue":e[0]||(e[0]=a=>n.time=a),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,{span:8},{default:o(()=>[t(_,{label:"创建时间",prop:"createdAt"},{default:o(()=>[t(f,{modelValue:n.createdAt,"onUpdate:modelValue":e[1]||(e[1]=a=>n.createdAt=a),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,{span:8},{default:o(()=>[t(_,{label:"更新时间",prop:"updatedAt"},{default:o(()=>[t(f,{modelValue:n.updatedAt,"onUpdate:modelValue":e[2]||(e[2]=a=>n.updatedAt=a),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),Y("div",G,[t(p,{type:"primary",icon:b(E),onClick:e[3]||(e[3]=a=>r(!0))},{default:o(()=>[u(" 搜索 ")]),_:1},8,["icon"]),t(p,{icon:b(H),onClick:e[4]||(e[4]=a=>V(k.value))},{default:o(()=>[u(" 重置 ")]),_:1},8,["icon"])])]),Y("div",I,[t(S,{ref_key:"proTable",ref:A,"tool-button":!1,data:M.value,columns:C},{tableHeader:o(()=>[t(p,{type:"primary",icon:b(U),onClick:e[5]||(e[5]=a=>{var m;return(m=c.value)==null?void 0:m.openDialog()})},{default:o(()=>[u("新增日志")]),_:1},8,["icon"])]),operation:o(({row:a})=>[t(p,{type:"primary",link:"",onClick:m=>{var x;return(x=c.value)==null?void 0:x.openDialog(a)}},{default:o(()=>[u("编辑")]),_:2},1032,["onClick"]),t(p,{type:"danger",link:"",onClick:m=>$(a.id)},{default:o(()=>[u("删除")]),_:2},1032,["onClick"])]),pagination:o(()=>[t(T,{background:!0,"current-page":d.pageNum,"onUpdate:currentPage":e[6]||(e[6]=a=>d.pageNum=a),"page-size":d.pageSize,"onUpdate:pageSize":e[7]||(e[7]=a=>d.pageSize=a),"page-sizes":[10,25,50,100],total:D.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e[8]||(e[8]=a=>r()),onCurrentChange:e[9]||(e[9]=a=>r())},null,8,["current-page","page-size","total"])]),_:1},8,["data","columns"])]),t(j,{ref_key:"editLogRef",ref:c,onRefreshList:e[10]||(e[10]=a=>r(!0))},null,512)])}}});export{oe as default};
