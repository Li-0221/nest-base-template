import{_ as x}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-BU16DZwG.js";import{d as k,i as d,R as w,$ as B,r as f,o as M,c as S,b as a,w as n,u as C,T as Y,e as l,aK as i,P as p,a0 as m,aE as v}from"./index-MVVa4Kd4.js";import{b as A,c as E,f as $,g as D}from"./software-D2V1Z9AX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sortable.esm-C0-Qcoum.js";const H={class:"h-full"};function j(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!v(o)}const L=k({__name:"index",setup(o){const _=d(),u=d([]),y=w([{prop:"name",label:"分类名称"},{prop:"SoftWare",label:"包含软件",render:({row:e})=>e.SoftWare.length?e.SoftWare.map(({id:s,title:t})=>a(f("el-tag"),{key:s,class:"ml-2"},j(t)?t:{default:()=>[t]})):""},{prop:"updatedAt",label:"更新时间",width:180,sortable:!0,render:({row:e})=>e.updatedAt?m(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"):""},{prop:"createdAt",label:"创建时间",width:180,sortable:!0,render:({row:e})=>m(e.createdAt).format("YYYY-MM-DD HH:mm:ss")},{prop:"operation",label:"操作",fixed:"right",width:120}]),r=async()=>{const{data:e}=await A();u.value=e},b=()=>{i.prompt("请输入软件分类名称！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{2,10}$/,inputErrorMessage:"请输入2到10个字符的有效名称"}).then(async({value:e})=>{await E({name:e}),p.success("新增成功"),r()})},T=async(e,s)=>{i.prompt("请输入软件分类名称！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:s,inputPattern:/^[\u4e00-\u9fa5a-zA-Z0-9]{2,10}$/,inputErrorMessage:"请输入2到10个字符的有效名称"}).then(async({value:t})=>{await $({id:e,name:t}),p.success("编辑成功"),r()})},g=e=>{i.confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await D(e),p.success("删除成功"),r()})};return B(()=>{r()}),(e,s)=>{const t=f("el-button");return M(),S("div",H,[a(x,{ref_key:"proTable",ref:_,"tool-button":!1,data:u.value,columns:y,pagination:!1},{tableHeader:n(()=>[a(t,{type:"primary",icon:C(Y),onClick:b},{default:n(()=>[l("新增类型")]),_:1},8,["icon"])]),operation:n(({row:c})=>[a(t,{type:"primary",link:"",onClick:h=>T(c.id,c.name)},{default:n(()=>[l("编辑 ")]),_:2},1032,["onClick"]),a(t,{type:"danger",link:"",onClick:h=>g(c.id),disabled:c.SoftWare.length!==0},{default:n(()=>[l("删除")]),_:2},1032,["onClick","disabled"])]),_:1},8,["data","columns"])])}}});export{L as default};
